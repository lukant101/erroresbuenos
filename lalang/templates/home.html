{% extends 'shell.html' %}

{% block content %}
    <div class="row justify-content-center">
        <h3 id="title_practice" class='col text-center mt-4 mb-1'></h3>
        <script>
            setTitlePractise();
            var current_language = "{{ curr_lang }}";
        </script>
    </div>

  <div class="row">
      <div id="images-container" class="col d-flex justify-content-center">
          {% for image in question.image_files.split(",") %}
            {% set image = image.lstrip() %}
            <div id="picture-{{ loop.index }}" class="m-2 align-self-center">
                <picture>
                    {% set file_name, extension = image.split(".") %}
                      {% if extension == 'jpg' %}
                          <source id="img-webp-{{ loop.index }}" type=”image/webp” srcset="{{ url_for('static', filename='pics/' ~ file_name ~ '-480px.webp') }} 1x, {{ url_for('static', filename='pics/' ~ file_name ~ '-960px.webp') }} 2x">
                          <img id="img-default-{{ loop.index }}" class='rounded mx-auto m-3 img-fluid' src="{{ url_for('static', filename='pics/' ~ file_name ~ '-480px.jpg') }}" alt='{{ question.word }}' srcset="{{ url_for('static', filename='pics/' ~ file_name ~ '-480px.jpg') }} 1x, {{ url_for('static', filename='pics/' ~ file_name ~ '-960px.jpg') }} 2x">
                      {% elif extension == "png" %}
                          <source id="img-webp-{{ loop.index }}">
                          <img id="img-default-{{ loop.index }}" class='rounded mx-auto m-3 img-fluid' src="{{ url_for('static', filename='pics/' ~ file_name ~ '-480px.png') }}" alt='{{ question.word }}' srcset="{{ url_for('static', filename='pics/' ~ file_name ~ '-480px.png') }} 1x, {{ url_for('static', filename='pics/' ~ file_name ~ '-960px.png') }} 2x">
                      {% elif extension == "svg" %}
                          <source id="img-webp-{{ loop.index }}">
                          <img id="img-default-{{ loop.index }}" class='rounded mx-auto m-3 img-fluid' src="{{ url_for('static', filename='pics/' ~ file_name ~ '.svg') }}" alt="{{ question.word }}" width="480">
                      {% endif %}
                </picture>
            </div> <!-- picture -->
          {% endfor %}
      </div> <!-- image-container -->
  </div> <!-- row -->

  <div class="container">
      <div class="row justify-content-center">
          <div class="d-flex flex-column col">

              <div id="show_answer" class="mt-3 px-2" style="display: none;"> <!-- display answer -->
                <span class='mb-1'>Answer: <span id="word_elem" class="font-weight-bold">{{ question.word }}</span></span>
              </div> <!-- display answer -->

              <div id="gtranslate" class='my-3 px-2' style="display: none;"> <!-- google translation -->
                  <form>
                      <input id="translate_text_input" type="hidden" value="{{ question.word }}">
                      <button id="translate-btn" type="button" class="btn btn-info ml-0">Translate</button>
                      <button id="translate_text_output" type="button" class="btn btn-success ml-0" style="display: none;"></button>
                  </form>
              </div> <!-- google translation -->

              <div class='form-group mt-2 px-2'> <!-- answer input -->
                <form id="question_form">
                <label class='d-block'>Part of Speech: <span id="part_of_speech_elem" class="font-weight-bold">{{ question.part_of_speech }}</span></label>
                <button id='play_button' onclick='playAudioOut()' type='button' class='btn btn-info rounded-circle d-inline mr-2 mb-2'><i class="fas fa-volume-up"></i></button>
                <input type='text' class='custom-control custom-control-inline mr-0 mb-2' name="user_answer" id='user_answer' />
                <button id='send_answer_btn' type='button' class='btn btn-info rounded-circle ml-0 mb-2'><i class="fas fa-arrow-right"></i></button>

                <button type='button' class='font-icon btn btn-info rounded-circle ml-0 mb-2'>&#8594</button>
                <button type='button' class='font-icon btn btn-info rounded-circle ml-0 mb-2'>&#8614</button>
                <button type='button' class='font-icon btn btn-info rounded-circle ml-0 mb-2'>&#8658</button>
                <button type='button' class='btn btn-info rounded-circle ml-0 mb-2'><span class="font-icon">&#8680</span></button>
                <button type='button' class='font-icon btn btn-info rounded-circle ml-0 mb-2'>&#8702</button>
                <button type='button' class='font-icon btn btn-info rounded-circle ml-0 mb-2'>&#xf028</button>
                <button type='button' class='font-icon btn btn-info rounded-circle ml-0 mb-2'><img src="{{ url_for('static', filename='pics/volume-up-solid.svg') }}" alt='volume up' width='50' height='50'>></button>
                <button id="good_job_msg" style="display:none" class="btn btn-success ml-3" type='button'>Good job!</button>
                <button id="wrong_answer_btn" style="display:none" class="btn btn-danger rounded-circle ml-0" type='button'><i class="fas fa-arrow-right"></i></button>
                <input type="hidden" name="question_id" id="question_id" value="{{ question.id }}">
                <input type="hidden" name="student_id" id="student_id" value="{{ student_id }}">
                <input type="hidden" name="answer" id="answer" value="{{ question.word }}">
                <input type="hidden" name="answer_correct" id="answer_correct" value="false">
                <input type="hidden" name="audio_answer_correct" id="audio_answer_correct" value="false">
                </form>
              </div> <!-- answer input -->

              <div class=" mt-3 mb-2 ml-5 px-2">
                <a href="{{ url_for('register') }}"><button id="prod_signup" type="button" class="btn btn-primary ml-2" style="display: none;">Sign up to save your answers</button></a>
              </div> <!-- prompt sign-up -->

              <audio id='card_audio'>
                <source id="audio_src" src="{{ url_for('static', filename='audio/' ~ curr_lang ~ '/' ~ question.audio_files) }}" type='audio/ogg'>
                Your browser does not support this audio file format.
              </audio>
          </div> <!-- flex-column -->
      </div> <!-- row -->
  </div> <!-- container -->
{% endblock content %}
